(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[480],{7970:function(e,r,s){Promise.resolve().then(s.bind(s,4244))},4244:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return y}});var t=s(7437),n=s(6463),i=s(2265),a=s(1444),c=s(6645),o=s(1960),d=s(7308),h=s(9793),l=s(358),g=s(9811),x=s(6712),u=s(6800),j=s.n(u),v=s(2574);let p=i.forwardRef((e,r)=>{let{bsPrefix:s,size:n,vertical:i=!1,className:a,role:c="group",as:o="div",...d}=e,h=(0,v.vE)(s,"btn-group"),l=h;return i&&(l="".concat(h,"-vertical")),(0,t.jsx)(o,{...d,ref:r,role:c,className:j()(a,l,n&&"".concat(h,"-").concat(n))})});p.displayName="ButtonGroup";var f=s(2514),m=s(5211),Z=s(7346),k=s(9671),b=s(8104),S=s(2909),w=s(9439),N=s(689),E=s(5168);function y(){var e,r;let s=(0,a.I0)(),u=(0,n.useSearchParams)(),[j,v]=(0,i.useState)(!0),[m,y]=(0,i.useState)(void 0),[R,_]=(0,i.useState)(void 0),[T,C]=(0,i.useState)(void 0),[P,B]=(0,i.useState)(void 0),[F,I]=(0,i.useState)(void 0),[L,U]=(0,i.useState)([]),[A,O]=(0,i.useState)({stakesBreakdown:{},signersWeight:{}});(0,i.useEffect)(()=>{let e;let r=u.get(k.aggregatorSearchParam),t=Number(u.get("epoch"));_(r),C(t),(0,o.checkUrl)(r)?Number.isInteger(t)||(e="invalidEpoch"):e="invalidAggregatorUrl",void 0===e?(fetch("".concat(r,"/signers/registered/").concat(t)).then(e=>200===e.status?e.json():{}).then(e=>{B(e.signing_at),U(e.registrations),O({stakesBreakdown:(0,c.Q2)(e.registrations),signersWeight:(0,c.Fw)(e.registrations)}),v(!1)}).catch(e=>{B(void 0),U([]),v(!1),console.error("Fetch registrations error:",e)}),fetch("".concat(r,"/epoch-settings")).then(e=>200===e.status?e.json():{}).then(e=>I(null==e?void 0:e.epoch)).catch(e=>{I(void 0),console.error("Fetch current epoch in epoch-settings error:",e)}),s((0,b.Q9)(r))):y(e)},[u]);let Q=(0,i.useCallback)(e=>{let r=new URLSearchParams;return r.set("aggregator",R),r.set("epoch",e),"/registrations?".concat(r.toString())},[R]),W=Q(T-1),D=Q(F),H=Q(T+1);if(void 0!==m){let e="";switch(m){case"invalidEpoch":e="The given epoch isn't an integer, please correct it and try again.";break;case"invalidAggregatorUrl":e="The given aggregator isn't a valid url, please correct it and try again.";break;default:e="Something went wrong"}return(0,t.jsxs)(d.Z,{gap:3,children:[(0,t.jsx)("h2",{children:"Registrations"}),(0,t.jsxs)(h.Z,{variant:"danger",children:[(0,t.jsx)(h.Z.Heading,{children:"Oh snap! You got an error!"}),(0,t.jsx)("p",{children:e})]})]})}return(0,t.jsxs)(d.Z,{gap:3,children:[(0,t.jsxs)("h2",{children:["Registrations"," ",(0,t.jsx)(N.Z,{href:"".concat(R,"/signers/registered/").concat(T),variant:"outline-light",size:"sm"})]}),(0,t.jsx)(l.Z,{children:(0,t.jsx)(g.Z,{children:(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:"Aggregator:"})}),(0,t.jsx)("td",{children:R})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:"Registration epoch:"})}),(0,t.jsx)("td",{children:T})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:"Signing at epoch:"})}),(0,t.jsx)("td",{children:null!=P?P:"?"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:"Number of signers:"})}),(0,t.jsx)("td",{children:null!==(e=null==L?void 0:L.length)&&void 0!==e?e:0})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:"Total stakes:"})}),(0,t.jsx)("td",{children:(0,t.jsx)(w.Z,{lovelace:null!==(r=null==L?void 0:L.reduce((e,r)=>e+r.stake,0))&&void 0!==r?r:0})})]})]})})}),(0,t.jsx)(l.Z,{children:Number.isInteger(T)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{xs:12,sm:12,md:3,lg:2,className:"d-grid mb-1",children:(0,t.jsxs)(S.Z,{href:D,disabled:void 0===F||F===T,children:["Current Cardano Epoch (",F,")"]})}),(0,t.jsx)(x.Z,{xs:12,sm:12,md:6,lg:4,className:"d-grid mb-1",children:(0,t.jsxs)(p,{children:[(0,t.jsxs)(S.Z,{href:W,children:["Previous Registration Epoch (",T-1,")"]}),(0,t.jsxs)(S.Z,{href:H,disabled:F<=T,children:["Next Registration Epoch (",T+1,")"]})]})})]})}),j?(0,t.jsx)(f.Z,{animation:"grow"}):void 0===L||0===L.length?(0,t.jsxs)(h.Z,{variant:"info",children:[(0,t.jsxs)(h.Z.Heading,{children:["No registrations for epoch ",T]}),(0,t.jsx)("p",{children:F===T?"The aggregator did not receive registrations yet for the current epoch.":F<T?"The epoch is in the future":"The aggregator may have pruned old registrations or wasn't running at this epoch."})]}):(0,t.jsxs)(l.Z,{children:[(0,t.jsxs)(x.Z,{xs:12,sm:12,md:7,children:[(0,t.jsx)("h3",{children:"Signers"}),(0,t.jsx)(E.Z,{signers:L,displayIndexes:!0})]}),(0,t.jsx)(x.Z,{xs:12,sm:12,md:5,children:(0,t.jsxs)(d.Z,{gap:3,children:[(0,t.jsx)("h3",{children:"Stakes breakdown"}),(0,t.jsx)(Z.$Q,{data:A.stakesBreakdown}),(0,t.jsx)("h3",{children:"Signers weight"}),(0,t.jsx)(Z.by,{data:A.signersWeight})]})})]})]})}m.kL.register(m.qi,m.uw,m.f$,m.ZL,m.Dx,m.u,m.De),(0,c.hZ)(m.kL)}},function(e){e.O(0,[674,948,811,384,971,23,744],function(){return e(e.s=7970)}),_N_E=e.O()}]);